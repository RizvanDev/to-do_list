"use strict";const timeNow=document.getElementById("time"),addImg=document.getElementById("add-img"),img=document.getElementById("avatar-out"),addImgBtn=document.querySelector(".avatar__item"),write=document.querySelector(".write"),input=document.querySelector(".input"),text=document.querySelector(".text"),reset=document.querySelector(".reset"),clearText=document.querySelector(".clearText"),toDoList=document.querySelector(".todo"),creatList=document.querySelector(".save"),showTips=document.querySelector(".showReference"),addNewList=document.querySelector(".plus__btn"),reference=document.querySelector(".overlay"),referenceClose=document.querySelector(".closeReference");function dateTime(){let e=new Date;var t=e.getDate();let a=e.getMonth();a<=9&&(a="0"+a);var s=e.getFullYear(),n=e.getHours(),l=e.getMinutes();let i=e.getSeconds();return i<=9&&(i="0"+i),s+"."+a+"."+t+"  "+n+"."+l+"."+i}function uploadFile(e){if(!["image/jpeg","image/png"].includes(e.type))return alert("select only the following formats:.jpg, .png"),void(addImg.value="");let t=new FileReader;t.onload=function(e){img.innerHTML=`<img src="${e.target.result}" alt="avatar">`},t.addEventListener("load",()=>{localStorage.setItem("userImgData",t.result)}),addImgBtn.style.opacity="0.4",t.readAsDataURL(e)}function openToDo(){write.classList.toggle("open"),creatList.classList.toggle("active"),addNewList.classList.toggle("rotate"),input.value="",text.value=""}function clearInput(){input.value=""}function clearTxt(){text.value=""}function Task(e,t){this.title=e,this.text=t}setInterval(function(){timeNow.innerHTML=dateTime()},100),addImg.addEventListener("change",()=>{uploadFile(addImg.files[0])}),document.addEventListener("DOMContentLoaded",()=>{var e=localStorage.getItem("userImgData");e&&(img.innerHTML=`<img src="${e}" alt="avatar">`,addImgBtn.style.opacity="0.4")}),addNewList.addEventListener("click",openToDo),reset.addEventListener("click",clearInput),clearText.addEventListener("click",clearTxt);let cases;function creatTemplate(e){return`
      <div class="list">
         <span class="list__title">${e.title}</span>
         <p class="list__text">${e.text}</p>
         <button type="button" class="view__details">details</button>
         <span class="clear"></span>
       </div>
   `}function searchToDo(){toDoList.innerHTML="",0<cases.length&&cases.forEach(e=>{toDoList.innerHTML+=creatTemplate(e)})}function dinamic(){const t=document.querySelectorAll(".view__details"),a=document.querySelectorAll(".list__text");for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{t[e].classList.toggle("view"),a[e].classList.toggle("view")})}function deleteToDo(){const t=document.querySelectorAll(".clear");for(let e=0;e<t.length;e++)t[e].addEventListener("click",()=>{t[e].parentElement.remove(),cases.splice(e,1),localStorage.setItem("userData",JSON.stringify(cases))})}function openTips(){reference.style.visibility="visible",reference.style.opacity="1",reference.style.transition="all 0.8s ease 0s",window.scrollTo({top:1e4,behavior:"smooth"})}function closeTips(){reference.style.visibility="hidden",reference.style.opacity="0",reference.style.transition="all  0s ease 0s"}cases=void 0===localStorage.userData?[]:JSON.parse(localStorage.getItem("userData")),searchToDo(),creatList.addEventListener("click",()=>""!=input.value&&(cases.push(new Task(input.value,text.value)),localStorage.setItem("userData",JSON.stringify(cases)),toDoList.innerHTML=`
     <div class="list">
        <span class="list__title"></span>
        <p class="list__text"></p>
        <button type="button" class="view__details">details</button>
        <span class="clear"></span>
     </div>
   `,searchToDo(),dinamic(),deleteToDo(),input.value="",void(text.value=""))),dinamic(),deleteToDo(),showTips.addEventListener("click",openTips),referenceClose.addEventListener("click",closeTips);